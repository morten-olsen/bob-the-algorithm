(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{334:function(e,t,n){"use strict";n(341);var r=n(7),a=n.n(r),o=n(2),i=n.n(o),c=n(336),s=n(452),u=n(0),l=n(9),b=n.n(l),j=function(e,t){var n=Object(u.useState)(),r=a()(n,2),o=r[0],c=r[1],s=Object(u.useState)(),l=a()(s,2),b=l[0],j=l[1],d=Object(u.useState)(!1),f=a()(d,2),p=f[0],O=f[1],m=Object(u.useState)(),h=a()(m,2),v=h[0],g=h[1],x=Object(u.useCallback)(e,t),y=Object(u.useCallback)((function(){var e,t,n,r,a=arguments;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:for(O(!0),g(!1),e=a.length,t=new Array(e),n=0;n<e;n++)t[n]=a[n];return j(t),o.prev=4,o.next=7,i.a.awrap(x.apply(void 0,t));case 7:return r=o.sent,c(r),o.abrupt("return",r);case 12:throw o.prev=12,o.t0=o.catch(4),c(void 0),g(o.t0),o.t0;case 17:return o.prev=17,O(!1),o.finish(17);case 20:case"end":return o.stop()}}),null,null,[[4,12,17,20]],Promise)}),[O,g,c,x]);return Object(u.useMemo)((function(){return[y,{result:o,loading:p,error:v,args:b}]}),[y,o,p,v,b])},d=function(e,t){var n=j(e,t),r=a()(n,2),o=r[0],i=r[1];Object(u.useEffect)((function(){o()}),[o]);var c=Object(u.useMemo)((function(){return{loading:i.loading,error:i.error,rerun:o}}),[o,i.loading,i.error]);return[i.result,c]},f=n(48),p=n(445),O=Object(u.createContext)(void 0),m=n(1);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=e.children,n=e.day,r=Object(u.useState)({}),o=a()(r,2),c=o[0],s=o[1],l=Object(u.useMemo)((function(){return"agenda-contexts-"+Object(p.a)(n,"yyyy-MM-dd")}),[n]),j=Object(u.useCallback)((function(e,t){var n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=v(v({},c),{},b()({},e,v({},t))),s(n),r.next=4,i.a.awrap(f.a.setItem(l,JSON.stringify(c)));case 4:case"end":return r.stop()}}),null,null,null,Promise)}),[s,c,l]);return d((function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(f.a.getItem(l));case 2:if(e=n.sent){n.next=5;break}return n.abrupt("return");case 5:t=JSON.parse(e),Object.values(t).forEach((function(e){e.startMax&&(e.startMax=new Date(e.startMax)),e.startMin&&(e.startMin=new Date(e.startMin))})),s(t);case 8:case"end":return n.stop()}}),null,null,null,Promise)}),[l]),Object(m.jsx)(O.Provider,{value:{contexts:c,set:j},children:t})},x=n(449),y=n(44),w=Object(u.createContext)(void 0),S=n(10),k=function(e){var t=e.date,n=e.children,r=e.setDate,o=e.calendarName,c=void 0===o?"Bob the planner":o,s=Object(u.useState)([]),l=a()(s,2),b=l[0],j=l[1],p=d((function(){var e,t,n,r,a,o;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,i.a.awrap(Object(y.i)());case 2:if(e=s.sent,t=e.status,"ios"===S.a.OS){s.next=6;break}return s.abrupt("return",{status:"unavailable"});case 6:if("granted"===t){s.next=8;break}return s.abrupt("return",{status:"rejected"});case 8:return s.next=10,i.a.awrap(Object(y.f)(y.b.EVENT));case 10:if(n=s.sent,r=n.find((function(e){return e.title===c}))){s.next=22;break}return s.next=15,i.a.awrap(Object(y.g)());case 15:return a=s.sent,s.next=18,i.a.awrap(Object(y.c)({title:c,source:a.source,sourceId:a.source.id,ownerAccount:"personal",accessLevel:y.a.OWNER,entityType:y.b.EVENT,name:c}));case 18:return s.next=20,i.a.awrap(Object(y.f)(y.b.EVENT));case 20:n=s.sent,r=n.find((function(e){return e.name===c}));case 22:return s.next=24,i.a.awrap(f.a.getItem("selected_calendars"));case 24:return(o=s.sent)&&j(JSON.parse(o)),s.abrupt("return",{status:"ready",calendars:n,calendar:r});case 27:case"end":return s.stop()}}),null,null,null,Promise)}),[]),O=a()(p,1)[0],h=Object(u.useCallback)((function(e){var t=e.map((function(e){return e.id}));j(t),f.a.setItem("selected_calendars",JSON.stringify(t))}),[j]),v=Object(u.useMemo)((function(){return"ready"!==(null==O?void 0:O.status)?[]:O.calendars.filter((function(e){return b.includes(e.id)}))}),[O,b]);return O?"ready"!==O.status?Object(m.jsx)(w.Provider,{value:{status:O.status,date:t,setDate:r},children:n}):Object(m.jsx)(w.Provider,{value:{status:"ready",setDate:r,date:t,selected:v,setSelected:h,calendar:O.calendar,calendars:O.calendars},children:n}):Object(m.jsx)(m.Fragment,{})};function P(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=[],T=function(){},M=function(){var e=Object(u.useContext)(w);return"ready"!==e.status?D:e.selected},z=function(){return Object(u.useContext)(w).date},E=function(){var e=z(),t=function(){var e=Object(u.useContext)(w);if("ready"===e.status)return e.calendar}();return j((function(n){var r,a,o,c,s,u;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(t){l.next=2;break}return l.abrupt("return");case 2:return r=Object(x.a)(e,{hours:24,minutes:0,seconds:0,milliseconds:0}),l.next=5,i.a.awrap(Object(y.h)([t.id],e,r));case 5:return a=l.sent,l.next=8,i.a.awrap(Promise.all(a.map((function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(Object(y.e)(e.id));case 2:case"end":return t.stop()}}),null,null,null,Promise)}))));case 8:o=P(n);case 9:if((c=o()).done){l.next=18;break}if("task"!==(s=c.value).type||!s.external){l.next=13;break}return l.abrupt("continue",16);case 13:return u="task"===s.type?s.name:s.from.title+" to "+s.to.title,l.next=16,i.a.awrap(Object(y.d)(t.id,{title:u,startDate:s.start,endDate:s.end}));case 16:l.next=9;break;case 18:case"end":return l.stop()}}),null,null,null,Promise)}),[e,t])},I=n(17),A=n.n(I),L=Object(u.createContext)(void 0);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(e){var t=e.children,n=Object(u.useState)({}),r=a()(n,2),o=r[0],c=r[1],s=Object(u.useMemo)((function(){return Object.values(o)}),[o]);d((function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(f.a.getItem("routines-items"));case 2:if(e=n.sent){n.next=5;break}return n.abrupt("return");case 5:t=JSON.parse(e),Object.values(t).forEach((function(e){e.start.max=new Date(e.start.max),e.start.min=new Date(e.start.min)})),c(t);case 8:case"end":return n.stop()}}),null,null,null,Promise)}),[c]);var l=j((function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=N(N({},o),{},b()({},e.id,e)),c(t),n.next=4,i.a.awrap(f.a.setItem("routines-items",JSON.stringify(t)));case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[c,o]),p=a()(l,1)[0],O=j((function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return delete(t=N({},o))[e],c(t),n.next=5,i.a.awrap(f.a.setItem("routines-items",JSON.stringify(t)));case 5:case"end":return n.stop()}}),null,null,null,Promise)}),[c,o]),h=a()(O,1)[0];return Object(m.jsx)(L.Provider,{value:{routines:s,set:p,remove:h},children:t})},H=function(e){var t=Object(u.useContext)(L).routines;return Object(u.useMemo)((function(){return t.filter((function(t){return void 0===typeof e||!t.days||t.days[e]}))}),[t])},q=function(e,t){return Object(x.a)(t,{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()})},J=function(){var e=z(),t=Object(u.useMemo)((function(){return e.getDay()}),[e]),n=function(e,t){var n=M();return t||(t=Object(x.a)(e,{hours:24,minutes:0,seconds:0,milliseconds:0})),d((function(){return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==n.length){r.next=2;break}return r.abrupt("return",[]);case 2:return r.abrupt("return",Object(y.h)(n.map((function(e){return e.id})),e,t));case 3:case"end":return r.stop()}}),null,null,null,Promise)}),[n,e.getTime()])}(e),r=a()(n,1)[0],o=void 0===r?[]:r,c=H(t),s=Object(u.useMemo)((function(){return o.filter((function(e){return!e.allDay})).map((function(e){var t=new Date(e.startDate),n=new Date(e.endDate).getTime()-t.getTime();return{id:e.id,name:e.title,external:!0,required:!0,start:{min:t,max:t},priority:100,duration:{min:n}}}))}),[o]),l=Object(u.useMemo)((function(){return c.map((function(t){return{id:t.id,name:t.title,locations:t.location,start:{min:q(e,t.start.min),max:q(e,t.start.max)},priority:t.priority,required:t.required,duration:{min:t.duration}}}))}),[c,e]);return Object(u.useMemo)((function(){return{calendar:s,routines:l,all:[].concat(A()(l),A()(s))}}),[s,l])};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=function(e,t){return Object(x.a)(t,{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()})},_=function(){return Object(u.useContext)(O).contexts},$=function(){var e=Object(u.useContext)(O).set;return j(e,[e])},Y=function(){var e=J().all,t=z(),n=_();return Object(u.useMemo)((function(){return e.map((function(e){var r,a=n[e.id];return R(R({},e),{},a?{locations:null!=(r=a.locations)&&r.length?a.locations:e.locations,start:{min:a.startMin?U(t,a.startMin):e.start.min,max:a.startMax?U(t,a.startMax):e.start.max},duration:R(R({},e.duration),{},{min:a.duration||e.duration.min}),count:a.count,enabled:"undefined"===typeof a.enabled||a.enabled}:{enabled:!0})}))}),[e,n])},G=Object(u.createContext)(void 0);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(e){var t=e.children,n=e.lookup,r=e.getTransition,o=Object(u.useState)({}),c=a()(o,2),s=c[0],l=c[1];d((function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(f.a.getItem("location_storage"));case 2:(e=t.sent)&&l(JSON.parse(e));case 4:case"end":return t.stop()}}),null,null,null,Promise)}),[]);var p=j((function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=W(W({},s),{},b()({},e.id,e)),l(t),n.next=4,i.a.awrap(f.a.setItem("location_storage",JSON.stringify(t)));case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[l,s]),O=a()(p,1)[0],h=j((function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return delete(t=W({},s))[e],l(t),n.next=5,i.a.awrap(f.a.setItem("location_storage",JSON.stringify(t)));case 5:case"end":return n.stop()}}),null,null,null,Promise)}),[l,s]),v=a()(h,1)[0];return Object(m.jsx)(G.Provider,{value:{locations:s,set:O,remove:v,lookup:n,getTransition:r},children:t})},X=n(139);function Z(e,t,n,r){var a=ee(n-e),o=ee(r-t),i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(ee(e))*Math.cos(ee(n))*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}function ee(e){return e*(Math.PI/180)}var te=function(){return Object(u.useContext)(G).locations};function ne(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e,t){return e===t||(e.location===t.location||(!(!e.location||!t.location||e.location.latitude!==t.location.latitude||e.location.longitute!==t.location.longitute)||e.title===t.title))},oe=function(e,t){return!!e.find((function(e){return ae(e,t)}))},ie=function(e,t){var n=[];return e.forEach((function(e){if(e.locations)for(var r,a=ne(e.locations);!(r=a()).done;){var o=r.value;oe(n,o)||ae(t,o)||n.push(o)}})),n};function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var be,je=function(e){return!!e.find((function(e){return e.required}))},de=function(e,t){for(var n,r={remaining:[],impossible:[]},a=ue(e);!(n=a()).done;){var o=n.value;t>o.start.max?r.impossible.push(o):r.remaining.push(o)}return r},fe=function(e){var t=e.tasks,n=e.transition,r=e.impossible,a=0;if(null==t||t.forEach((function(e){a+=10*e.priority,r.forEach((function(e){e.required?a-=1e4+1*e.priority:a-=100+1*e.priority}))})),n){var o=n.time/1e3/60;a-=10+1*o}return a},pe=function(e,t){var n,r,a;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=[],e.transition){o.next=5;break}return r=ie(e.remainingTasks,e.location),o.next=5,i.a.awrap(Promise.all(r.map((function(r){var a,o,c,s,u,l;return i.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,i.a.awrap(t.getTransition(e.location,r,e.time.end));case 2:a=b.sent,o=new Date(e.time.end.getTime()+a.time),c=de(e.remainingTasks,o),s=c.remaining,u=c.impossible,l=fe({transition:a,impossible:u}),n.push({parent:e,location:a.to,remainingTasks:s,transition:a,impossibeTasks:[].concat(A()(u),A()(e.impossibeTasks)),score:e.score+l,status:{completed:!1,dead:je(u)},time:{start:e.time.end,end:o}});case 7:case"end":return b.stop()}}),null,null,null,Promise)}))));case 5:return a=e.remainingTasks.filter((function(t){return!t.locations||oe(t.locations,e.location)})),o.next=8,i.a.awrap(Promise.all(a.map((function(t){var r,a,o,c,s,u,l,b;return i.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:(r=se({},t)).count=(r.count||1)-1,a=new Date(Math.max(e.time.end.getTime(),r.start.min.getTime())),o=e.remainingTasks.filter((function(e){return e!==t})),c=new Date(a.getTime()+r.duration.min),s=de(r.count>0?[].concat(A()(o),[r]):o,c),u=s.remaining,l=s.impossible,b=fe({tasks:[r],impossible:l}),n.push({parent:e,location:e.location,task:r,remainingTasks:u,impossibeTasks:[].concat(A()(l),A()(e.impossibeTasks)),score:e.score+b,status:{completed:0===u.length,dead:je(l)},time:{start:a,end:c}});case 8:case"end":return i.stop()}}),null,null,null,Promise)}))));case 8:return o.abrupt("return",n);case 9:case"end":return o.stop()}}),null,null,null,Promise)};!function(e){e.all="all",e.allValid="all-valid",e.firstValid="first-valid",e.firstComplet="first-complete"}(be||(be={}));var Oe=function(e){return new Promise((function(t){return setTimeout(t,e)}))},me=function(e,t){for(var n=new Array(e.length).fill(void 0).map((function(){return[]})),r=0;r<t.length;r++)for(var a=0;a<e.length;a++)e[a](t[r])&&n[a].push(t[r]);return n},he=function(e){var t,n,r,o,c,s,u,l,b,j,d,f,p,O,m,h,v,g,x,y,w,S,k,P,C,D,T,M,z;return i.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:t=e.location,n=e.time,r=e.tasks,o=e.context,c=e.strategy,s=void 0===c?be.allValid:c,u=e.callback,l=e.batchSize,b=void 0===l?1e3:l,j=e.sleepTime,d=void 0===j?10:j,f=new Date,p=0,O=!0,m=de(r,n),h=m.remaining,v=m.impossible,g=[{location:t,time:{end:n,start:n},score:0,remainingTasks:h,impossibeTasks:v,status:{dead:!1,completed:!1}}],x=[],y=[],w=function(e){return u&&u({current:"completed",nodes:p,start:f,end:new Date,strategy:s}),e.sort((function(e,t){return t.score-e.score}))};case 9:if(p++,O){E.next=13;break}return E.abrupt("return",[]);case 13:if(0===g.length&&0===x.length&&s!==be.all&&(s=be.all,g.push.apply(g,y)),S=g.pop()){E.next=17;break}return E.abrupt("break",36);case 17:if(p%b!==0){E.next=21;break}return u&&u({current:"running",nodes:p,strategy:s,start:f,cancel:function(){O=!1}}),E.next=21,i.a.awrap(Oe(d));case 21:return E.next=23,i.a.awrap(pe(S,o));case 23:if(k=E.sent,P=me([function(e){return(s===be.all||!e.status.dead)&&!e.status.completed},function(e){return!!e.status.completed&&(s===be.all||!e.status.dead)},function(e){return e.status.dead}],k),C=a()(P,3),D=C[0],T=C[1],M=C[2],g.push.apply(g,A()(D)),!(s===be.firstValid&&T.length>0)){E.next=28;break}return E.abrupt("return",w(T));case 28:if(T.length>0&&x.push.apply(x,A()(T)),s!==be.firstComplet){E.next=33;break}if(!(z=T.find((function(e){return 0===e.impossibeTasks.length})))){E.next=33;break}return E.abrupt("return",w([z]));case 33:y.push.apply(y,A()(M)),E.next=9;break;case 36:return E.abrupt("return",w(x));case 37:case"end":return E.stop()}}),null,null,null,Promise)},ve=Object(u.createContext)(void 0);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){var t=e.children,n=Object(u.useState)({strategy:be.firstComplet}),r=a()(n,2),o=r[0],i=r[1],c=Object(u.useCallback)((function(e){i((function(t){return xe(xe({},t),e)}))}),[i]);return Object(m.jsx)(ve.Provider,{value:{options:o,setOptions:c},children:t})},we=function(e){for(var t=e,n=[];t;){var r,a,o;if(t.task)n.push({type:"task",name:(null==(r=t.task)?void 0:r.name)||"start",external:null==(a=t.task)?void 0:a.external,start:new Date(t.time.start.getTime()+((null==(o=t.transition)?void 0:o.time)||0)),end:t.time.end,score:t.score});t.transition&&n.push({type:"transition",start:t.time.start,end:new Date(t.time.start.getTime()+t.transition.time),from:t.transition.from,to:t.transition.to}),t=t.parent}return n.reverse()},Se=function(){return Object(u.useContext)(ve).options},ke=function(e){var t=e.location,n=z(),r=Se(),o=Object(u.useState)(),c=a()(o,2),s=c[0],l=c[1],b=Y(),d=Object(u.useMemo)((function(){return b.filter((function(e){return e.enabled}))}),[b]),f=Object(u.useContext)(G).getTransition,p=j((function(e){var a,o,c;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,i.a.awrap(he({location:t,time:e||n,tasks:d,strategy:r.strategy,context:{getTransition:f},callback:l}));case 2:return a=s.sent,o=a.filter((function(e){return!e.status.dead&&e.status.completed})).sort((function(e,t){return t.score-e.score})),c=we(o[0]),s.abrupt("return",{impossible:o[0].impossibeTasks,agenda:c});case 6:case"end":return s.stop()}}),null,null,null,Promise)}),[n,t,b,l,r]),O=a()(p,2),m=O[0],h=O[1];return[m,{result:h.result,loading:h.loading,error:h.error,status:s}]},Pe=function(e){var t=e.children,n=e.day,r=e.setDate,a=e.getTransit;return Object(m.jsx)(k,{date:n,setDate:r,children:Object(m.jsx)(B,{children:Object(m.jsx)(Q,{getTransition:a,lookup:function(){return[]},children:Object(m.jsx)(g,{day:n,children:Object(m.jsx)(ye,{children:t})})})})})},Ce=n(446),De=n(12),Te=n(18),Me=n.n(Te),ze=n(447);function Ee(e){var t=e.size,n=e.color,r=e.name,a=Object(De.c)();return Object(m.jsx)(ze.a,{name:r,color:n?a.colors[n]:a.colors.icon,size:null!=t?t:a.sizes.icons})}var Ie,Ae,Le=n(105).a,Ve=n(13),Ne=n.n(Ve),Be=["children","onPress"],He=["accessibilityLabel","accessibilityRole","accessibilityHint"];function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe,Re,Ue,_e,$e,Ye,Ge,Ke,We,Qe,Xe,Ze,et,tt,nt,rt,at=De.b.View(Ie||(Ie=Me()(["\n  padding: ","px;\n  ","\n  ","\n  flex-direction: ",";\n  align-items: ",";\n  ","\n"])),(function(e){return e.theme.margins.medium/2}),(function(e){var t=e.background;return t?"background: "+t+";":""}),(function(e){var t=e.flex;return t?"flex: "+t+";":""}),(function(e){var t=e.direction;return t||"row"}),(function(e){var t=e.align;return t||"center"}),(function(e){var t=e.opacity;return t?"opacity: "+t+";":""})),ot=De.b.TouchableOpacity(Ae||(Ae=Me()([""]))),it=function(e){var t=e.children,n=e.onPress,r=Ne()(e,Be),a=r.accessibilityLabel,o=r.accessibilityRole,i=r.accessibilityHint,c=Ne()(r,He),s=Object(m.jsx)(at,Je(Je({},c),{},{children:t}));return n?Object(m.jsx)(ot,{accessible:!0,accessibilityRole:o||"button",accessibilityLabel:a,accessibilityHint:i,onPress:n,children:s}):s},ct=De.b.Text(Fe||(Fe=Me()(["\n  color: ",";\n  font-weight: ",";\n  font-size: ","px;\n"])),(function(e){var t=e.color,n=e.theme;return t?n.colors[t]:n.colors.text}),(function(e){return e.bold?"bold":"normal"}),(function(e){return e.theme.font.baseSize})),st=(Object(De.b)(ct)(Re||(Re=Me()(["\n  font-size: ","px;\n  font-weight: bold;\n"])),(function(e){return 2.8*e.theme.font.baseSize})),Object(De.b)(ct)(Ue||(Ue=Me()(["\n  font-size: ","px;\n  font-weight: bold;\n"])),(function(e){return 1.3*e.theme.font.baseSize})),Object(De.b)(ct)(_e||(_e=Me()(["\n  font-weight: bold;\n"])))),ut=Object(De.b)(ct)($e||($e=Me()([""]))),lt=Object(De.b)(ct)(Ye||(Ye=Me()(["\n  font-size: ","px;\n  text-transform: uppercase;\n"])),(function(e){return.6*e.theme.font.baseSize})),bt=(Object(De.b)(ct)(Ge||(Ge=Me()(["\n  font-size: ","px;\n"])),(function(e){return.8*e.theme.font.baseSize})),Object(De.b)(ct)(Ke||(Ke=Me()(["\n  text-transform: uppercase;\n"])))),jt=De.b.View(We||(We=Me()([""]))),dt=function(e,t){return e?"string"===typeof e?Object(m.jsx)(t,{children:e}):e:null},ft=function(e){var t=e.background,n=e.top,r=e.left,a=e.right,o=e.title,i=e.opacity,c=e.overline,s=e.description,u=e.children,l=e.onPress;return Object(m.jsxs)(it,{background:t,opacity:i,onPress:l,children:[r,Object(m.jsxs)(it,{flex:1,direction:"column",align:"stretch",children:[!!n,dt(c,lt),dt(o,st),dt(s,ut),!!u&&Object(m.jsx)(jt,{children:u})]}),a]})},pt=(De.b.View(Qe||(Qe=Me()(["\n  background: ",";\n  width: ","px;\n  height: ","px;\n  border-radius: ","px;\n"])),(function(e){return e.color}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.size/4})),n(49)),Ot=De.b.KeyboardAvoidingView(Xe||(Xe=Me()(["\n  flex: 1;\n"]))),mt=De.b.Pressable(Ze||(Ze=Me()(["\n  flex: 1;\n"]))),ht=function(e){var t=e.children,n=Object(u.useState)(!1),r=a()(n,2),o=r[0],i=r[1];return Object(u.useEffect)((function(){var e=function(){return i(!0)},t=function(){return i(!1)};return pt.a.addListener("keyboardDidShow",e),pt.a.addListener("keyboardDidHide",t),function(){pt.a.removeListener("keyboardDidShow",e),pt.a.removeListener("keyboardDidHide",t)}}),[]),Object(m.jsx)(mt,{disabled:!o,onPress:function(){return pt.a.dismiss()},children:Object(m.jsx)(Ot,{behavior:"ios"===S.a.OS?"padding":"height",children:t})})},vt=De.b.Pressable(et||(et=Me()(["\n  flex: 1;\n"]))),gt=De.b.View(tt||(tt=Me()(["\n  background: ",";\n  width: 100%;\n  shadow-color: ",";\n  shadow-offset: 0 0;\n  shadow-opacity: 1;\n  shadow-radius: 200px;\n  border-radius: 12px;\n  margin-bottom: -12px;\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.shadow})),xt=De.b.View(nt||(nt=Me()(["\n  flex: 1;\n"]))),yt=function(e){e.visible;var t=e.children,n=e.onClose,r=Object(s.d)();return Object(m.jsx)(ht,{children:Object(m.jsxs)(xt,{children:[Object(m.jsx)(vt,{onPress:n}),Object(m.jsxs)(gt,{style:{paddingBottom:r.bottom+12},children:[Object(m.jsx)(ft,{right:Object(m.jsx)(it,{onPress:n,children:Object(m.jsx)(Ee,{name:"x-circle"})})}),t]})]})})},wt=function(e){var t=e.visible,n=e.onClose,r=e.children;return Object(m.jsx)(Le,{transparent:!0,visible:t,animationType:"slide",onRequestClose:n,onDismiss:n,children:Object(m.jsx)(yt,{onClose:n,children:r})})},St=["placeholder","value","onChangeText","children"];function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ct,Dt,Tt,Mt,zt,Et,It,At,Lt,Vt,Nt,Bt,Ht,qt=De.b.TextInput(rt||(rt=Me()(["\n  background: ",";\n  color: ",";\n  padding: ","px;\n  font-size: ","px;\n  border-radius: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.colors.input}),(function(e){return e.theme.colors.text}),(function(e){return e.theme.margins.small}),(function(e){return e.theme.font.baseSize}),(function(e){return e.theme.sizes.corners})),Jt=function(e){var t=e.placeholder,n=e.value,r=e.onChangeText,a=e.children,o=Ne()(e,St);Object(De.c)();return Object(m.jsxs)(ft,Pt(Pt({overline:t},o),{},{children:[Object(m.jsx)(qt,{value:n,onChangeText:r}),a]}))},Ft=function(e){var t=e.value,n=e.label,r=e.onChange;return Object(m.jsx)(ft,{overline:n,title:t?"Yes":"No",onPress:function(){return r(!t)}})},Rt=De.b.TouchableOpacity(Ct||(Ct=Me()([""]))),Ut=De.b.View(Dt||(Dt=Me()(["\n  color: ",";\n  padding: ","px;\n  border-radius: ","px;\n  align-items: center;\n"])),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.margins.small}),(function(e){return e.theme.sizes.corners})),_t=function(e){var t=e.title,n=e.icon,r=e.type,a=e.onPress,o=e.accessibilityHint,i=e.accessibilityRole,c=e.accessibilityLabel;return Object(m.jsx)(Rt,{onPress:a,accessible:!0,accessibilityHint:o,accessibilityRole:i,accessibilityLabel:c,children:Object(m.jsxs)(Ut,{children:[t&&Object(m.jsx)(bt,{color:r,children:t}),n&&Object(m.jsx)(Ee,{name:n,color:r})]})})},$t=n(32),Yt=n(57),Gt=De.b.View(Tt||(Tt=Me()(["\n\n"]))),Kt=(De.b.Text(Mt||(Mt=Me()(["\n\n"]))),function(){var e=te(),t=Object(u.useContext)(G).remove,n=Object($t.o)().navigate;return Object(m.jsxs)(Gt,{children:[Object(m.jsx)(_t,{icon:"plus-circle",onPress:function(){return n("locationSet")}}),Object(m.jsx)(Yt.a,{data:Object.values(e),keyExtractor:function(e){return e.id},renderItem:function(e){var r=e.item;return Object(m.jsx)(ft,{title:r.title,onPress:function(){n("locationSet",{id:r.id})},right:Object(m.jsx)(it,{children:Object(m.jsx)(_t,{type:"destructive",icon:"trash",onPress:function(){return t(r.id)}})})})}})]})}),Wt=n(117),Qt=n(444),Xt=n(448),Zt=De.b.View(zt||(zt=Me()(["\n\n"]))),en=function(){var e=H(),t=function(){var e=Object(u.useContext)(L).remove;return Object(u.useCallback)((function(t){return e(t)}),[e])}(),n=Object($t.o)().navigate;return Object(m.jsxs)(Zt,{children:[Object(m.jsx)(_t,{icon:"plus-circle",onPress:function(){return n("routineSet")}}),Object(m.jsx)(Yt.a,{data:Object.values(e),keyExtractor:function(e){return e.id},renderItem:function(e){var r,a=e.item;return Object(m.jsx)(ft,{title:a.title,subtitle:null==(r=a.location)?void 0:r.map((function(e){return e.title})).join(", "),onPress:function(){n("routineSet",{id:a.id})},right:Object(m.jsx)(it,{children:Object(m.jsx)(_t,{icon:"trash",type:"destructive",onPress:function(){return t(a.id)}})})})}})]})},tn=n(87),nn=function(){var e=Object($t.q)().params,t=void 0===e?{}:e,n=Object(u.useMemo)((function(){return t.id||Object(tn.a)()}),[t.id]),r=te(),o=Object($t.o)(),i=o.navigate,c=o.goBack,s=Object(u.useState)(""),l=a()(s,2),b=l[0],j=l[1],d=Object(u.useState)(""),f=a()(d,2),p=f[0],O=f[1],h=Object(u.useState)(""),v=a()(h,2),g=v[0],x=v[1],y=Object(u.useContext)(G).set;Object(u.useEffect)((function(){var e,t,a=r[n];a&&(j(a.title),O((null==(e=a.location)?void 0:e.longitute.toString())||""),x((null==(t=a.location)?void 0:t.latitude.toString())||""))}),[r,n]);var w=Object(u.useCallback)((function(){var e=parseFloat(p),t=parseFloat(g);y({id:n,title:b,location:{longitute:e,latitude:t}}),i("main")}),[b,p,g,n]);return Object(m.jsxs)(yt,{onClose:c,children:[Object(m.jsx)(Jt,{value:b,onChangeText:j,placeholder:"Title"}),Object(m.jsx)(Jt,{value:p,onChangeText:O,placeholder:"Longitute"}),Object(m.jsx)(Jt,{value:g,onChangeText:x,placeholder:"Latitude"}),Object(m.jsx)(_t,{title:"Save",onPress:w})]})},rn=n(115),an=n.n(rn),on=n(76),cn=n.n(on),sn=(n(327),De.b.Text(Et||(Et=Me()(["\n  font-size: 10px;\n  color: #fff;\n  font-weight: bold;\n  color: ",";\n"])),(function(e){return"transparent"===e.background?"#222":"#fff"}))),un=De.b.View(It||(It=Me()(["\n  margin-right: 10px;\n  width: 50px;\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n"])),(function(e){var t=e.background;return"transparent"===t?t:cn()(t).darken(1.5).hex()})),ln=De.b.View(At||(At=Me()(["\n  margin: 10px;\n  width: 50px;\n  height: 50px;\n  align-items: center;\n  justify-content: center;\n"]))),bn=De.b.View(Lt||(Lt=Me()(["\n  background: ",";\n  height: ","px;\n  max-height: 100px;\n  margin: 5px;\n  flex-direction: row;\n  align-items: center;\n  border-radius: 3px;\n  border: solid 1px ",";\n"])),(function(e){return e.background}),(function(e){return e.height/3}),(function(e){var t=e.background;return"transparent"===t?t:cn()(t).darken(.3).hex()})),jn=De.b.View(Vt||(Vt=Me()(["\n  flex: 1;\n"]))),dn=function(e){return e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")},fn=De.b.TouchableOpacity(Nt||(Nt=Me()(["\n\n"]))),pn=function(e){var t=e.item,n=e.onPress,r=Object(m.jsxs)(bn,{height:Math.max(70,t.height/15e3),background:t.color,children:[Object(m.jsxs)(un,{background:t.color,children:[Object(m.jsx)(sn,{background:t.color,children:dn(t.start)}),Object(m.jsx)(sn,{background:t.color,children:dn(t.end)})]}),Object(m.jsx)(jn,{children:t.body}),Object(m.jsx)(ln,{})]});return n?Object(m.jsx)(fn,{onPress:n,children:r}):r};function On(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mn(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hn,vn,gn,xn,yn=De.b.View(Bt||(Bt=Me()(["\n"]))),wn=De.b.Text(Ht||(Ht=Me()(["\n"]))),Sn=function(e){var t=e.plan,n=Object(u.useMemo)((function(){for(var e,n,r,a=[],o=On(A()(t).slice(0));!(n=o()).done;){var i=n.value;e&&i.start.getTime()-e.end.getTime()>0&&a.push({height:i.start.getTime()-e.end.getTime(),color:"transparent",start:e.end,end:i.start});var c="transition"===i.type?"#34495e":an()(i.name);c=cn()(c).luminance(.7).saturate(1).brighten(.6).hex(),a.push({height:i.end.getTime()-i.start.getTime(),color:c,start:i.start,end:i.end,body:(r=i,"transition"===r.type?Object(m.jsxs)(wn,{children:[r.from.title," \u279c ",r.to.title]}):Object(m.jsx)(wn,{children:r.name}))}),e=i}return a}),[t]);return Object(m.jsx)(yn,{children:n.map((function(e,t){return Object(m.jsx)(pn,{item:e},t)}))})},kn=n(441),Pn=n(335),Cn=De.b.ScrollView(hn||(hn=Me()(["\n\n"]))),Dn=function(e){if("running"===e.current){var t=Object(kn.a)(e.start,{includeSeconds:!0});return"calulated "+e.nodes+" nodes in "+t+" using "+e.strategy}var n=Object(Pn.a)(e.start,e.end,{includeSeconds:!0});return"calulated "+e.nodes+" nodes in "+n+" using "+e.strategy},Tn=function(){var e,t,n,r=z(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=te(),n=d((function(){var n,r,a,o;return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,i.a.awrap(Object(X.b)());case 2:if(n=c.sent,"granted"===n.status){c.next=6;break}return c.abrupt("return",void 0);case 6:return c.next=8,i.a.awrap(Object(X.a)({}));case 8:if(r=c.sent,a=Object.values(t).map((function(e){if(e.location)return{distance:Z(r.coords.latitude,r.coords.longitude,e.location.latitude,e.location.longitute),location:e}})).filter(Boolean).sort((function(e,t){return e.distance-t.distance})),o=a.find((function(t){return t.distance<e}))){c.next=13;break}return c.abrupt("return",{id:r.coords.longitude+" "+r.coords.latitude,title:"Unknown",location:{latitude:r.coords.latitude,longitute:r.coords.longitude}});case 13:return c.abrupt("return",o.location);case 14:case"end":return c.stop()}}),null,null,null,Promise)}),[]);return n}(),c=a()(o,1)[0],s=Object(u.useState)("06:00"),l=a()(s,2),b=l[0],j=l[1],f=E(),O=a()(f,1)[0],h=Object($t.o)().navigate,v=Object(u.useMemo)((function(){return c||{id:"unknown",title:"Unknown"}}),[c]),g=ke({location:v}),y=a()(g,2),w=y[0],S=y[1],k=Object(u.useCallback)((function(){var e=new Date("2000-01-01T"+b+":00"),t=Object(x.a)(r,{hours:e.getHours(),minutes:e.getMinutes()});w(t)}),[r,w,b]);return Object(m.jsx)(Cn,{children:Object(m.jsxs)(ht,{children:[Object(m.jsx)(Jt,{overline:"Start time",value:b,onChangeText:j,right:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(it,{children:!S.error&&S.status&&"running"===S.status.current?Object(m.jsx)(_t,{type:"destructive",onPress:S.status.cancel,icon:"x"}):Object(m.jsx)(_t,{icon:"play",onPress:k})}),!(null==(e=S.result)||!e.agenda)&&Object(m.jsx)(it,{children:Object(m.jsx)(_t,{onPress:function(){var e;return O((null==(e=S.result)?void 0:e.agenda)||[])},icon:"download"})}),Object(m.jsx)(it,{children:Object(m.jsx)(_t,{onPress:function(){return h("planSettings")},icon:"settings"})})]})}),!!S.error&&Object(m.jsx)(ft,{title:JSON.stringify(S.error)}),"running"===(null==(t=S.status)?void 0:t.current)&&Object(m.jsx)(ft,{title:Dn(S.status)}),!!S.result&&"completed"===(null==(n=S.status)?void 0:n.current)&&Object(m.jsxs)(ft,{title:Object(p.a)(r,"EEEE - do MMMM"),overline:Dn(S.status),children:[S.result.impossible&&S.result.impossible.length>0&&Object(m.jsxs)(ut,{children:["Impossible: ",S.result.impossible.map((function(e){return e.name})).join(", ")]}),Object(m.jsx)(Sn,{plan:S.result.agenda})]})]})})},Mn=De.b.View(vn||(vn=Me()(["\n\n"]))),zn=De.b.Button(gn||(gn=Me()(["\n\n"]))),En=function(){var e=function(){var e=Object(u.useContext)(w);return"ready"!==e.status?D:e.calendars}(),t=M(),n=function(){var e=Object(u.useContext)(w);return"ready"!==e.status?T:e.setSelected}(),r=Object(u.useCallback)((function(e){var r=!!t.find((function(t){return t.id===e.id}));n(r?t.filter((function(t){return t.id!==e.id})):[].concat(A()(t),[e]))}),[t]);return Object(m.jsx)(Mn,{children:e.map((function(e){return Object(m.jsx)(zn,{title:e.title+(t.includes(e)?" -y":"-n"),onPress:function(){return r(e)}},e.id)}))})},In=function(){var e=Object($t.q)().params,t=void 0===e?{}:e,n=Object(u.useMemo)((function(){return t.id||Object(tn.a)()}),[t.id]),r=H(),o=Object($t.o)(),i=o.navigate,c=o.goBack,s=Object(u.useState)(""),l=a()(s,2),b=l[0],j=l[1],d=Object(u.useState)(""),f=a()(d,2),O=f[0],h=f[1],v=Object(u.useState)(""),g=a()(v,2),x=g[0],y=g[1],w=Object(u.useState)(""),S=a()(w,2),k=S[0],P=S[1],C=te(),D=Object(u.useState)(!1),T=a()(D,2),M=T[0],z=T[1],E=Object(u.useState)(""),I=a()(E,2),A=I[0],V=I[1],N=function(){var e=Object(u.useContext)(L).set;return Object(u.useCallback)((function(t){return e(t)}),[e])}();Object(u.useEffect)((function(){var e,t=r.find((function(e){return e.id===n}));if(t){j(t.title),t.start.min&&h(Object(p.a)(t.start.min,"HH:mm")),t.start.max&&y(Object(p.a)(t.start.max,"HH:mm")),t.duration&&P((t.duration/1e3/60).toString()),z(!!t.required);var a=(null==(e=t.location)?void 0:e.map((function(e){return e.title})).join(","))||"";V(a)}}),[r,n]);var B=Object(u.useCallback)((function(){var e=A.split(",").map((function(e){return Object.values(C).find((function(t){return t.title.toLowerCase()===e.trim().toLowerCase()}))})).filter(Boolean);N({id:n,title:b,priority:50,required:M,location:e.length>0?e:void 0,start:{min:new Date("2020-01-01T"+O+":00"),max:new Date("2020-01-01T"+x+":00")},duration:1e3*parseInt(k)*60}),i("main")}),[b,O,x,k,A,M]);return Object(m.jsxs)(yt,{onClose:c,children:[Object(m.jsx)(Jt,{value:b,onChangeText:j,placeholder:"Title"}),Object(m.jsx)(Jt,{value:O,onChangeText:h,placeholder:"Start min"}),Object(m.jsx)(Jt,{value:x,onChangeText:y,placeholder:"Start max"}),Object(m.jsx)(Jt,{value:k,onChangeText:P,placeholder:"Duration"}),Object(m.jsx)(Jt,{value:A,onChangeText:V,placeholder:"Location"}),Object(m.jsx)(Ft,{label:"Required",value:M,onChange:z}),Object(m.jsx)(_t,{title:"Save",onPress:B})]})},An=n(328),Ln=n.n(An);function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bn=De.b.View(xn||(xn=Me()(["\n\n"]))),Hn=function(){var e=z(),t=Object(De.c)(),n=Object(u.useContext)(w).setDate,r=Object(u.useMemo)((function(){return[{date:e,lines:[{color:t.colors.icon}]}]}),[e]);return Object(m.jsx)(Ln.a,{markedDates:r,style:{height:150,paddingTop:60,paddingBottom:10,backgroundColor:t.colors.background},calendarColor:"#fff",selectedDate:e,startingDate:e,onDateSelected:function(e){n(Object(x.a)(e.toDate(),{hours:0,minutes:0,seconds:0,milliseconds:0}))},shouldAllowFontScaling:!1,iconContainer:{flex:.1},calendarHeaderStyle:{color:t.colors.text,fontSize:1.2*t.font.baseSize},highlightDateNameStyle:{color:t.colors.icon,fontSize:.6*t.font.baseSize},iconLeftStyle:{tintColor:t.colors.text},iconRightStyle:{tintColor:t.colors.text},highlightDateNumberStyle:{color:t.colors.icon,fontSize:1.2*t.font.baseSize},dateNumberStyle:{color:t.colors.text,fontSize:1.2*t.font.baseSize},dateNameStyle:{color:t.colors.text,fontSize:.6*t.font.baseSize}})},qn=function(){var e=Y(),t=Object($t.o)().navigate,n=_(),r=$(),o=a()(r,1)[0],i=Object(u.useCallback)((function(e){var t=n[e.id]||{};o(e.id,Nn(Nn({},t),{},{enabled:!e.enabled}))}),[o]);return Object(m.jsx)(Bn,{children:Object(m.jsx)(Yt.a,{ListHeaderComponent:Hn,data:Object.values(e),keyExtractor:function(e){return e.id},renderItem:function(e){var n=e.item;return Object(m.jsx)(ft,{onPress:function(){i(n)},opacity:n.enabled?void 0:.3,right:Object(m.jsx)(_t,{icon:"edit",onPress:function(){t("agendaContextSet",{id:n.id})}}),children:Object(m.jsx)(pn,{item:{height:18e5,body:Object(m.jsx)(ut,{children:n.name}),start:n.start.min,color:cn()(an()(n.name)).luminance(.7).saturate(1).brighten(.6).hex(),end:new Date(n.start.max.getTime()+n.duration.min)}})})}})})},Jn=function(){var e=Object($t.q)().params,t=void 0===e?{}:e,n=Object(u.useMemo)((function(){return t.id||Object(tn.a)()}),[t.id]),r=_(),o=Object($t.o)(),i=o.navigate,c=o.goBack,s=te(),l=Object(u.useState)(""),b=a()(l,2),j=b[0],d=b[1],f=Object(u.useState)(!0),O=a()(f,2),h=O[0],v=O[1],g=Object(u.useState)(""),x=a()(g,2),y=x[0],w=x[1],S=Object(u.useState)(""),k=a()(S,2),P=k[0],C=k[1],D=Object(u.useState)(""),T=a()(D,2),M=T[0],z=T[1],E=Object(u.useState)("1"),I=a()(E,2),A=I[0],L=I[1],V=$(),N=a()(V,1)[0];Object(u.useEffect)((function(){var e,t=r[n];if(t){var a=(null==(e=t.locations)?void 0:e.map((function(e){return e.title})).join(","))||"";t.startMin&&w(Object(p.a)(t.startMin,"HH:mm")),t.startMax&&C(Object(p.a)(t.startMax,"HH:mm")),t.duration&&z((t.duration/1e3/60).toString()),t.count&&L(t.count.toString()),d(a),v(t.enabled)}}),[r,n]);var B=Object(u.useCallback)((function(){var e=j.split(",").map((function(e){return Object.values(s).find((function(t){return t.title.toLowerCase()===e.trim().toLowerCase()}))})).filter(Boolean);N(n,{enabled:h,locations:e,count:parseInt(A),startMin:y?new Date("2020-01-01T"+y+":00"):void 0,startMax:P?new Date("2020-01-01T"+P+":00"):void 0,duration:M?1e3*parseInt(M)*60:void 0}),i("main")}),[N,n,h,j,A,s,y,P,M]);return Object(m.jsxs)(yt,{onClose:c,children:[Object(m.jsx)(Jt,{value:j,onChangeText:d,placeholder:"Locations"}),Object(m.jsx)(Jt,{value:y,onChangeText:w,placeholder:"Start min"}),Object(m.jsx)(Jt,{value:P,onChangeText:C,placeholder:"Start max"}),Object(m.jsx)(Jt,{value:M,onChangeText:z,placeholder:"Duration"}),Object(m.jsx)(Jt,{value:A,onChangeText:L,placeholder:"Count"}),Object(m.jsx)(Ft,{label:"Enabled",value:h,onChange:v}),Object(m.jsx)(_t,{title:"Save",onPress:B})]})};function Fn(e){var t=e.items,n=e.label,r=e.getId,o=e.selected,i=e.setSelected,c=Object(u.useState)(!1),s=a()(c,2),l=s[0],b=s[1],j=Object(u.useMemo)((function(){return o?t.find((function(e){return r(e.value)===r(o)})):void 0}),[o,t]),d=Object(u.useCallback)((function(e){i(e),b(!1)}),[i,b]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(wt,{visible:l,onClose:function(){return b(!1)},children:t.map((function(e){return Object(m.jsx)(ft,{onPress:function(){return d(e.value)},title:e.display},r(e.value))}))}),Object(m.jsx)(ft,{overline:n,onPress:function(){return b(!0)},title:(null==j?void 0:j.display)||"Select"})]})}var Rn=[{display:"First valid",value:be.firstValid},{display:"First complete",value:be.firstComplet},{display:"All valid",value:be.allValid},{display:"All",value:be.all}],Un=function(){var e=Se(),t=Object(u.useContext)(ve).setOptions,n=Object($t.o)().goBack;return Object(m.jsx)(yt,{onClose:n,children:Object(m.jsx)(Fn,{label:"Strategy",items:Rn,getId:function(e){return e},selected:e.strategy,setSelected:function(e){t({strategy:e||be.firstComplet})}})})};function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yn=Object(Ce.a)(),Gn=function(){var e=Object(De.c)();return Object(m.jsxs)(Yn.Navigator,{screenOptions:{tabBarActiveTintColor:e.colors.primary},children:[Object(m.jsx)(Yn.Screen,{options:{headerShown:!1,tabBarLabel:"Prepare",tabBarIcon:function(e){var t=e.focused;return Object(m.jsx)(Ee,{color:t?"primary":"text",name:"check-square"})}},name:"tasks",component:qn}),Object(m.jsx)(Yn.Screen,{name:"plan",component:Tn,options:{tabBarLabel:"Plan",tabBarIcon:function(e){var t=e.focused;return Object(m.jsx)(Ee,{color:t?"primary":"text",name:"calendar"})}}}),Object(m.jsx)(Yn.Screen,{name:"locations",component:Kt,options:{tabBarLabel:"Locations",tabBarIcon:function(e){var t=e.focused;return Object(m.jsx)(Ee,{color:t?"primary":"text",name:"map-pin"})}}}),Object(m.jsx)(Yn.Screen,{name:"routines",component:en,options:{tabBarLabel:"Routines",tabBarIcon:function(e){var t=e.focused;return Object(m.jsx)(Ee,{color:t?"primary":"text",name:"activity"})}}}),Object(m.jsx)(Yn.Screen,{name:"calendars",component:En,options:{tabBarLabel:"Calendars",tabBarIcon:function(e){var t=e.focused;return Object(m.jsx)(Ee,{color:t?"primary":"text",name:"more-vertical"})}}})]})},Kn=Object(Xt.a)(),Wn=function(){return Object(m.jsxs)(Kn.Navigator,{screenOptions:{headerShown:!1},children:[Object(m.jsx)(Kn.Group,{children:Object(m.jsx)(Kn.Screen,{name:"main",component:Gn})}),Object(m.jsxs)(Kn.Group,{screenOptions:{presentation:"transparentModal"},children:[Object(m.jsx)(Kn.Screen,{name:"locationSet",component:nn}),Object(m.jsx)(Kn.Screen,{name:"routineSet",component:In}),Object(m.jsx)(Kn.Screen,{name:"agendaContextSet",component:Jn}),Object(m.jsx)(Kn.Screen,{name:"planSettings",component:Un})]})]})},Qn=function(){var e=Object(De.c)(),t=Object(u.useMemo)((function(){return Wt.a}),[]),n=Object(u.useMemo)((function(){return $n($n({},t),{},{colors:$n($n({},t.colors),{},{background:e.colors.shade,card:e.colors.background,text:e.colors.text})})}),[t,e]);return Object(m.jsx)(Qt.a,{theme:n,children:Object(m.jsx)(Wn,{})})},Xn={colors:{primary:"#1abc9c",icon:"#1abc9c",destructive:"#e74c3c",shade:"#ededed",input:"#ddd",secondary:"blue",shadow:"#000",background:"#fff",text:"#000",textShade:"#999"},sizes:{corners:5,icons:24},margins:{small:8,medium:16,large:24},font:{baseSize:14}};t.a=function(){var e=Object(u.useState)((function(){return Object(x.a)(new Date,{hours:0,minutes:0,seconds:0,milliseconds:0})})),t=a()(e,2),n=t[0],r=t[1],o=Object(u.useCallback)((function(e,t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{to:t,from:e,time:27e5,usableTime:0});case 1:case"end":return n.stop()}}),null,null,null,Promise)}),[]);return Object(m.jsxs)(s.b,{children:[Object(m.jsx)(c.a,{}),Object(m.jsx)(De.a,{theme:Xn,children:Object(m.jsx)(Pe,{getTransit:o,day:n,setDate:r,children:Object(m.jsx)(Qn,{})})})]})}},340:function(e,t,n){e.exports=n(431)},395:function(e,t,n){var r={"./af":147,"./af.js":147,"./ar":148,"./ar-dz":149,"./ar-dz.js":149,"./ar-kw":150,"./ar-kw.js":150,"./ar-ly":151,"./ar-ly.js":151,"./ar-ma":152,"./ar-ma.js":152,"./ar-sa":153,"./ar-sa.js":153,"./ar-tn":154,"./ar-tn.js":154,"./ar.js":148,"./az":155,"./az.js":155,"./be":156,"./be.js":156,"./bg":157,"./bg.js":157,"./bm":158,"./bm.js":158,"./bn":159,"./bn-bd":160,"./bn-bd.js":160,"./bn.js":159,"./bo":161,"./bo.js":161,"./br":162,"./br.js":162,"./bs":163,"./bs.js":163,"./ca":164,"./ca.js":164,"./cs":165,"./cs.js":165,"./cv":166,"./cv.js":166,"./cy":167,"./cy.js":167,"./da":168,"./da.js":168,"./de":169,"./de-at":170,"./de-at.js":170,"./de-ch":171,"./de-ch.js":171,"./de.js":169,"./dv":172,"./dv.js":172,"./el":173,"./el.js":173,"./en-au":174,"./en-au.js":174,"./en-ca":175,"./en-ca.js":175,"./en-gb":176,"./en-gb.js":176,"./en-ie":177,"./en-ie.js":177,"./en-il":178,"./en-il.js":178,"./en-in":179,"./en-in.js":179,"./en-nz":180,"./en-nz.js":180,"./en-sg":181,"./en-sg.js":181,"./eo":182,"./eo.js":182,"./es":183,"./es-do":184,"./es-do.js":184,"./es-mx":185,"./es-mx.js":185,"./es-us":186,"./es-us.js":186,"./es.js":183,"./et":187,"./et.js":187,"./eu":188,"./eu.js":188,"./fa":189,"./fa.js":189,"./fi":190,"./fi.js":190,"./fil":191,"./fil.js":191,"./fo":192,"./fo.js":192,"./fr":193,"./fr-ca":194,"./fr-ca.js":194,"./fr-ch":195,"./fr-ch.js":195,"./fr.js":193,"./fy":196,"./fy.js":196,"./ga":197,"./ga.js":197,"./gd":198,"./gd.js":198,"./gl":199,"./gl.js":199,"./gom-deva":200,"./gom-deva.js":200,"./gom-latn":201,"./gom-latn.js":201,"./gu":202,"./gu.js":202,"./he":203,"./he.js":203,"./hi":204,"./hi.js":204,"./hr":205,"./hr.js":205,"./hu":206,"./hu.js":206,"./hy-am":207,"./hy-am.js":207,"./id":208,"./id.js":208,"./is":209,"./is.js":209,"./it":210,"./it-ch":211,"./it-ch.js":211,"./it.js":210,"./ja":212,"./ja.js":212,"./jv":213,"./jv.js":213,"./ka":214,"./ka.js":214,"./kk":215,"./kk.js":215,"./km":216,"./km.js":216,"./kn":217,"./kn.js":217,"./ko":218,"./ko.js":218,"./ku":219,"./ku.js":219,"./ky":220,"./ky.js":220,"./lb":221,"./lb.js":221,"./lo":222,"./lo.js":222,"./lt":223,"./lt.js":223,"./lv":224,"./lv.js":224,"./me":225,"./me.js":225,"./mi":226,"./mi.js":226,"./mk":227,"./mk.js":227,"./ml":228,"./ml.js":228,"./mn":229,"./mn.js":229,"./mr":230,"./mr.js":230,"./ms":231,"./ms-my":232,"./ms-my.js":232,"./ms.js":231,"./mt":233,"./mt.js":233,"./my":234,"./my.js":234,"./nb":235,"./nb.js":235,"./ne":236,"./ne.js":236,"./nl":237,"./nl-be":238,"./nl-be.js":238,"./nl.js":237,"./nn":239,"./nn.js":239,"./oc-lnc":240,"./oc-lnc.js":240,"./pa-in":241,"./pa-in.js":241,"./pl":242,"./pl.js":242,"./pt":243,"./pt-br":244,"./pt-br.js":244,"./pt.js":243,"./ro":245,"./ro.js":245,"./ru":246,"./ru.js":246,"./sd":247,"./sd.js":247,"./se":248,"./se.js":248,"./si":249,"./si.js":249,"./sk":250,"./sk.js":250,"./sl":251,"./sl.js":251,"./sq":252,"./sq.js":252,"./sr":253,"./sr-cyrl":254,"./sr-cyrl.js":254,"./sr.js":253,"./ss":255,"./ss.js":255,"./sv":256,"./sv.js":256,"./sw":257,"./sw.js":257,"./ta":258,"./ta.js":258,"./te":259,"./te.js":259,"./tet":260,"./tet.js":260,"./tg":261,"./tg.js":261,"./th":262,"./th.js":262,"./tk":263,"./tk.js":263,"./tl-ph":264,"./tl-ph.js":264,"./tlh":265,"./tlh.js":265,"./tr":266,"./tr.js":266,"./tzl":267,"./tzl.js":267,"./tzm":268,"./tzm-latn":269,"./tzm-latn.js":269,"./tzm.js":268,"./ug-cn":270,"./ug-cn.js":270,"./uk":271,"./uk.js":271,"./ur":272,"./ur.js":272,"./uz":273,"./uz-latn":274,"./uz-latn.js":274,"./uz.js":273,"./vi":275,"./vi.js":275,"./x-pseudo":276,"./x-pseudo.js":276,"./yo":277,"./yo.js":277,"./zh-cn":278,"./zh-cn.js":278,"./zh-hk":279,"./zh-hk.js":279,"./zh-mo":280,"./zh-mo.js":280,"./zh-tw":281,"./zh-tw.js":281};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=395}},[[340,1,2]]]);
//# sourceMappingURL=app.6f22e9c7.chunk.js.map